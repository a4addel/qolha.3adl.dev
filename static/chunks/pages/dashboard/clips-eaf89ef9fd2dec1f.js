(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{3935:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/clips",function(){return s(2152)}])},2152:function(e,t,s){"use strict";s.r(t);var n=s(2086),a=s(8901),i=s(4347),l=s.n(i);s(3236);var r=s(8708),c=s(7867),d=s(7129),u=s(1648),o=s(2162),x=s(16);t.default=function(){let e=(0,c.useSession)(),t=(0,u.useRouter)(),s=o.d.clip.getClipThatNeedsRevision.useQuery();return(o.d.clip.accept.useMutation(),o.d.clip.reject.useMutation(),"loading"===e.status)?(0,n.jsx)(d.Z,{}):"unauthenticated"===e.status?t.push({pathname:"/api/auth/signin"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("link",{rel:"stylesheet",href:"/disable_scroll.css"})}),(0,n.jsx)(a.Z,{isSearch:!1}),(0,n.jsx)(r.Z,{children:(0,n.jsx)("div",{className:"flex flex-col max-w-sm ",children:s.data?.clips?.map((e,t)=>(0,n.jsx)(x.Z,{ar:e.word.ar,clipId:e.id,number:t,username:e?.user?.name||""},e.id))})})]})}},16:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(2086),a=s(6347),i=s(2214),l=s(2162),r=s(7867),c=s(3236),d=s(285),u=function(e){let{number:t,ar:s,username:u,clipId:o}=e,x=l.d.clip.reject.useMutation(),p=l.d.clip.accept.useMutation(),m=(0,c.useState)(!1),h=(0,r.useSession)(),j=(0,d.Z)({src:`/api/clip/${o}/stream`});return(0,n.jsxs)("div",{className:`flex p-1 justify-between ${t%2==0?"bg-slate-200":""}`,children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("span",{children:u}),j[0],(0,n.jsxs)(a.h,{className:"gap-2",children:[(0,n.jsx)(i.z,{disabled:m[0],onClick:j[2].play,small:!0,icon:"play",text:"play"}),"authenticated"===h.status&&["owner","admin"].includes(h.data?.user?.role||"")&&(0,n.jsx)(i.z,{disabled:m[0],onClick:async()=>{await p.mutateAsync({clipId:o}),m[1](!0)},small:!0,intent:"primary",text:"accept"}),"authenticated"===h.status&&["owner","admin"].includes(h.data?.user?.role||"")&&(0,n.jsx)(i.z,{disabled:m[0],onClick:async()=>{await x.mutateAsync({clipId:o}),m[1](!0)},small:!0,intent:"danger",icon:"trash",text:"reject"})]})]})}},8708:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(2086);function a(e){return(0,n.jsx)("div",{className:"block mx-auto w-full max-w-4xl px-4 py-2",children:e.children})}},8901:function(e,t,s){"use strict";s.d(t,{Z:function(){return S}});var n=s(2086),a=s(7867),i=s(1648),l=s(3236),r=s(6031),c=s(8778),d=s(2214),u=s(9878),o=s.n(u),x=s(4610),p=s(199),m=s(8362),h=s(6347),j=s(1497),f=s(7933),w=s(6090),g=s.n(w);function y(e){let{onFinish:t,disabled:s}=e,a=(0,l.useState)(""),i=g()({recordScreen:!1,mediaStreamConstraints:{audio:!0,video:!1},onStop:e=>{let s=URL.createObjectURL(e);a[1](s),t(e,s)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.i,{role:"alert"}),(0,n.jsxs)(h.h,{className:"w-full flex justify-around",children:[(0,n.jsx)(d.z,{className:"w-1/2",icon:["recording","paused"].includes(i.status)?(0,n.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,n.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,n.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}):"record",disabled:s,onClick:()=>["recording","paused"].includes(i.status)?i.stopRecording():i.startRecording(),title:["recording","paused"].includes(i.status)?"Record":"Stop_",text:["recording","paused"].includes(i.status)?"Stop_":"Record"}),(0,n.jsx)(j.i,{}),(0,n.jsx)(d.z,{className:"w-1/2",disabled:s,onClick:()=>"paused"===i.status?i.resumeRecording():i.pauseRecording(),title:"paused"===i.status?"Resume":"Pause ",text:"paused"===i.status?"Resume":"Pause "})]}),(0,n.jsx)(j.i,{role:"alert"}),(0,n.jsx)(m.U,{intent:"primary",icon:"record",className:"text-center",title:i.status}),(0,n.jsx)(j.i,{role:"alert"}),(0,n.jsx)("audio",{src:a[0],controls:!0}),(0,n.jsx)(j.i,{role:"alert"})]})}var b=s(2162),N=s(8746);function C(){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(null),[i,r]=(0,l.useState)(null),c=b.d.word.getWordThatNeedsClips.useQuery(),[u,o]=(0,N.ZP)({method:"POST",withCredentials:!0,url:`/api/clip/insert?wordId=${c?.data&&c?.data?.id}`,headers:{"Content-Type":"multipart/form-data"}},{manual:!0}),w=b.d.word.deleteWord.useMutation();async function g(){if(s?.size===0||!s)return;let e=new FormData;e.append("clip",s),await o({data:e}),a(null),r(null),c.refetch()}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.z,{title:"open",text:"open",onClick:()=>t(!0)}),(0,n.jsxs)(x.V,{isOpen:e,title:"Contribute a Clip",icon:"info-sign",isCloseButtonShown:!0,onClose:()=>t(!1),children:[(0,n.jsxs)(p.a,{children:[(0,n.jsxs)("div",{className:"flex flex-col max-w-xs border p-2 mx-auto",children:[(0,n.jsx)(m.U,{icon:"new-text-box",intent:"primary",title:c.data?.ar}),(0,n.jsx)(y,{disabled:!c.data?.ar,onFinish:function(e,t){a(e),r(t)}}),(0,n.jsxs)(h.h,{nonce:"",children:[(0,n.jsx)(d.z,{className:"w-1/2",intent:"primary",icon:"send-to",title:"send",text:"send",onClick:async()=>{await g(),c.refetch()}}),(0,n.jsx)(j.i,{}),(0,n.jsx)(d.z,{className:"w-1/2",intent:"danger",icon:"delete",title:"delete",text:"delete",onClick:async()=>{c?.data?.id&&(await w.mutateAsync({wordId:c?.data?.id}),c.refetch())}})]})]})," "]}),(0,n.jsx)(f.c,{actions:(0,n.jsx)(d.z,{onClick:()=>t(!1),intent:"primary",text:"Close"})})]})]})}function S(e){let{isSearch:t}=e;(0,a.useSession)(),(0,i.useRouter)();let[s,u]=(0,l.useState)(!1);return(0,n.jsx)(r.w,{children:(0,n.jsxs)(r.w.Group,{align:c.v.LEFT,children:[(0,n.jsx)(r.w.Heading,{children:"Qolha"}),(0,n.jsx)(r.w.Divider,{}),(0,n.jsx)(o(),{href:"/",children:(0,n.jsx)(d.z,{className:"bp5-minimal",icon:"home",text:"Home"})}),(0,n.jsx)(o(),{href:"/word/add",children:(0,n.jsx)(d.z,{className:"bp5-minimal",icon:"add-column-right",text:"add word"})}),(0,n.jsx)(C,{})]})})}},4347:function(e,t,s){e.exports=s(4196)}},function(e){e.O(0,[636,285,774,888,179],function(){return e(e.s=3935)}),_N_E=e.O()}]);