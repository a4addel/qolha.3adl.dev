(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{3731:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/word/[wordID]",function(){return s(3948)}])},3948:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return d},default:function(){return u},getQueryItem:function(){return c}});var n=s(2086),a=s(8708),i=s(8901),r=s(2162);s(3236);var l=s(16),d=!0;function c(e){return"string"==typeof e?e:e.length>0?e[0]:void 0}function u(e){let{trpcState:t,wordID:s}=e,d=r.d.word.getWord.useQuery(s);return"success"!=d.status?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{isSearch:!0}),(0,n.jsx)(a.Z,{children:"Loading"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{isSearch:!0}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(n.Fragment,{children:[d?.data?.ar,d?.data&&d?.data?.clips.map((e,t)=>(0,n.jsx)(l.Z,{ar:d.data?.ar||"",clipId:e.id,number:t,username:e.userId||""},t))]})})]})}},16:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(2086),a=s(6347),i=s(2214),r=s(2162),l=s(7867),d=s(3236),c=s(285),u=function(e){let{number:t,ar:s,username:u,clipId:o}=e,x=r.d.clip.reject.useMutation(),p=r.d.clip.accept.useMutation(),m=(0,d.useState)(!1),j=(0,l.useSession)(),h=(0,c.Z)({src:`/api/clip/${o}/stream`});return(0,n.jsxs)("div",{className:`flex p-1 justify-between ${t%2==0?"bg-slate-200":""}`,children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("span",{children:u}),h[0],(0,n.jsxs)(a.h,{className:"gap-2",children:[(0,n.jsx)(i.z,{disabled:m[0],onClick:h[2].play,small:!0,icon:"play",text:"play"}),"authenticated"===j.status&&["owner","admin"].includes(j.data?.user?.role||"")&&(0,n.jsx)(i.z,{disabled:m[0],onClick:async()=>{await p.mutateAsync({clipId:o}),m[1](!0)},small:!0,intent:"primary",text:"accept"}),"authenticated"===j.status&&["owner","admin"].includes(j.data?.user?.role||"")&&(0,n.jsx)(i.z,{disabled:m[0],onClick:async()=>{await x.mutateAsync({clipId:o}),m[1](!0)},small:!0,intent:"danger",icon:"trash",text:"reject"})]})]})}},8708:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(2086);function a(e){return(0,n.jsx)("div",{className:"block mx-auto w-full max-w-4xl px-4 py-2",children:e.children})}},8901:function(e,t,s){"use strict";s.d(t,{Z:function(){return S}});var n=s(2086),a=s(7867),i=s(1648),r=s(3236),l=s(6031),d=s(8778),c=s(2214),u=s(9878),o=s.n(u),x=s(4610),p=s(199),m=s(8362),j=s(6347),h=s(1497),f=s(7933),w=s(6090),g=s.n(w);function y(e){let{onFinish:t,disabled:s}=e,a=(0,r.useState)(""),i=g()({recordScreen:!1,mediaStreamConstraints:{audio:!0,video:!1},onStop:e=>{let s=URL.createObjectURL(e);a[1](s),t(e,s)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.i,{role:"alert"}),(0,n.jsxs)(j.h,{className:"w-full flex justify-around",children:[(0,n.jsx)(c.z,{className:"w-1/2",icon:["recording","paused"].includes(i.status)?(0,n.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,n.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,n.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}):"record",disabled:s,onClick:()=>["recording","paused"].includes(i.status)?i.stopRecording():i.startRecording(),title:["recording","paused"].includes(i.status)?"Record":"Stop_",text:["recording","paused"].includes(i.status)?"Stop_":"Record"}),(0,n.jsx)(h.i,{}),(0,n.jsx)(c.z,{className:"w-1/2",disabled:s,onClick:()=>"paused"===i.status?i.resumeRecording():i.pauseRecording(),title:"paused"===i.status?"Resume":"Pause ",text:"paused"===i.status?"Resume":"Pause "})]}),(0,n.jsx)(h.i,{role:"alert"}),(0,n.jsx)(m.U,{intent:"primary",icon:"record",className:"text-center",title:i.status}),(0,n.jsx)(h.i,{role:"alert"}),(0,n.jsx)("audio",{src:a[0],controls:!0}),(0,n.jsx)(h.i,{role:"alert"})]})}var N=s(2162),b=s(8746);function C(){let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(null),d=N.d.word.getWordThatNeedsClips.useQuery(),[u,o]=(0,b.ZP)({method:"POST",withCredentials:!0,url:`/api/clip/insert?wordId=${d?.data&&d?.data?.id}`,headers:{"Content-Type":"multipart/form-data"}},{manual:!0}),w=N.d.word.deleteWord.useMutation();async function g(){if(s?.size===0||!s)return;let e=new FormData;e.append("clip",s),await o({data:e}),a(null),l(null),d.refetch()}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.z,{title:"open",text:"open",onClick:()=>t(!0)}),(0,n.jsxs)(x.V,{isOpen:e,title:"Contribute a Clip",icon:"info-sign",isCloseButtonShown:!0,onClose:()=>t(!1),children:[(0,n.jsxs)(p.a,{children:[(0,n.jsxs)("div",{className:"flex flex-col max-w-xs border p-2 mx-auto",children:[(0,n.jsx)(m.U,{icon:"new-text-box",intent:"primary",title:d.data?.ar}),(0,n.jsx)(y,{disabled:!d.data?.ar,onFinish:function(e,t){a(e),l(t)}}),(0,n.jsxs)(j.h,{nonce:"",children:[(0,n.jsx)(c.z,{className:"w-1/2",intent:"primary",icon:"send-to",title:"send",text:"send",onClick:async()=>{await g(),d.refetch()}}),(0,n.jsx)(h.i,{}),(0,n.jsx)(c.z,{className:"w-1/2",intent:"danger",icon:"delete",title:"delete",text:"delete",onClick:async()=>{d?.data?.id&&(await w.mutateAsync({wordId:d?.data?.id}),d.refetch())}})]})]})," "]}),(0,n.jsx)(f.c,{actions:(0,n.jsx)(c.z,{onClick:()=>t(!1),intent:"primary",text:"Close"})})]})]})}function S(e){let{isSearch:t}=e;(0,a.useSession)(),(0,i.useRouter)();let[s,u]=(0,r.useState)(!1);return(0,n.jsx)(l.w,{children:(0,n.jsxs)(l.w.Group,{align:d.v.LEFT,children:[(0,n.jsx)(l.w.Heading,{children:"Qolha"}),(0,n.jsx)(l.w.Divider,{}),(0,n.jsx)(o(),{href:"/",children:(0,n.jsx)(c.z,{className:"bp5-minimal",icon:"home",text:"Home"})}),(0,n.jsx)(o(),{href:"/word/add",children:(0,n.jsx)(c.z,{className:"bp5-minimal",icon:"add-column-right",text:"add word"})}),(0,n.jsx)(C,{})]})})}}},function(e){e.O(0,[636,285,774,888,179],function(){return e(e.s=3731)}),_N_E=e.O()}]);